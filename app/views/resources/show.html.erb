<div class="container">
<% if @import_note.present? %>
  <font color="blue"><%== @import_note %></font>
  <hr>
  <b><%= link_to t('go_back_to_resources'), resources_path %>

<% else %>
    <h2><%= @resource.name %></h2>
    <h5>
    <% if not @resource.icon.blank? then %>
    <%= image_tag(@resource.icon, width: "200", :alt => @resource.name) %>
    <% end %></h5>
    <h5><%= t('resource_url') %>:
      <% if @resource.url.present? %>
        <%= link_to @resource.url,@resource.url %>
        <% if @resource.url_preview.present? %>
          <br><%== @resource.url_preview.gsub('\"','"').gsub("\\'", "'") %>
        <% end %>
      <% else %>
      <small><%= t('not_provided') %></small>
      <% end %></h5>
    <h5><%= t('description') %>:
        <% if @resource.description.present? %>
          <%= @resource.description %>
        <% else %>
            <%= t('not_provided') %>
        <% end %>
    </h5>
    <h5><%= t('tutorial') %>:
    <% if (!@resource.tutorial.blank?) %>
        <% if ((@resource.tutorial.include? "youtube.com" or @resource.tutorial.include? "youtu.be")) %>
            <%= link_to @resource.tutorial,@resource.tutorial %>
            <%
              embedded_frame=''
              begin
                embedded_frame='<br><br><iframe width="560" height="315" src="https://www.youtube.com/embed/'+@resource.tutorial.match(/\?v\=(.+)\&?/)[1]+'" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>'
              rescue
              end
            %>
            <%== embedded_frame %>
        <% else %>
          <%= link_to @resource.tutorial,@resource.tutorial %>
        <% end %>
    <% else %>
        <%= t('not_provided') %>
    <% end %>
    </h5>
    <h5><%= t('added_by') %>: <%= User.find(@resource.user_id).name %></h5>
    <h5><%= t('created_at') %>: <%= @resource.created_at %></h5>
    <h5><%= t('updated_at') %>: <%= @resource.updated_at %></h5>
    <br>
    <%= link_to t('export_this_resource'), export_resource_path(@resource), method: :post %>
    <br><br>
    <%= link_to t('go_back'), resources_path %>
      <% if @resource.user_id == current_user.id or current_user.id==1 %>
         - <%= link_to t('edit'), edit_resource_path(@resource) %> -
        <%= link_to t('delete'), resource_path(@resource), method: :delete, data: { confirm: t('warning_msg') } %>
      <% end %>
<% end %>
</div>
